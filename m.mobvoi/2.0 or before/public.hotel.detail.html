<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="format-detection" content="telephone=no" />
  <title>出门问问 酒店详情</title>
  <link rel="stylesheet" href="http://mobvoi-one-box.oss.aliyuncs.com/web/css/chumenwenwen.2.0.css" >
  <link rel="stylesheet" href="http://mobvoi-one-box.oss.aliyuncs.com/web/css/chumenwenwen.hotel.css" >
  <script src="http://mobvoi-one-box.oss.aliyuncs.com/web/js/chumenwenwen.3.0.js"></script>
</head>

<body>
  <div class="necker">
  </div>
  <div class="wrapper">
  </div>

  <script type="text/html" id="necker">
    <div class="banner gotoDial" data-tel="{ answer.hotel_info.phone }">
      <p><span class="layout-fleft layout-22px layout-bold layout-ellipsis" style="line-height: 22px; width: 80%">{ answer.hotel_info.hotel_name }</span><div class="clear"></div></p>
      <p><span class="layout-16px">{ answer.hotel_info.star_name }</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="layout-12px">电话: { answer.hotel_info.phone }</span></p>
      <img src="http://mobvoi-one-box.oss.aliyuncs.com/web/img/phone.png" style="width: 32px" />
    </div>
    <div class="div1">
      <div class="div1_left">
        <div class="div1_left_div1 gotoLink" data-link="{ answer.hotel_info.comment_url }">
          <p>
            <span class="layout-orange">{ answer.hotel_info.rating }%</span><span> 好评率</span>
            <span class="layout-fright"><img src="http://mobvoi-one-box.oss.aliyuncs.com/web/img/arrowright.png" style="width: 20px" /></span>
            <span class="layout-orange layout-fright">{ answer.hotel_info.comment_count } 条点评</span></p>
        </div>
        <div id="intro" class="div1_left_div1">
          <p>
            <span>酒店详细介绍及交通指南</span>
            <span class="layout-fright"><img src="http://mobvoi-one-box.oss.aliyuncs.com/web/img/arrowright.png" style="width: 20px" /></span>
          </p>
        </div>
      </div>
      <div class="div1_right">
        <img src="{ answer.hotel_info.img_url }" />
      </div>
    </div>
    <div class="clear"></div>
    <div class="div2">
      <div class="div2_div1 gotoMark">
        <p><span>{ answer.hotel_info.address }</span><span class="layout-fright layout-right layout-666"><img src="http://mobvoi-one-box.oss.aliyuncs.com/web/img/gps.png" /></span><div class="clear"></div></p>
      </div>
    </div>
  </script>

  <script type="text/html" id="wrapper">
    { if answer.room_array.length > 0 }
      <ul class="cards"> 
        { each answer.room_array as val i }
          <li class="cards_card" onClick="window.location.href='{ val.bookUrl }'">
            <div class="cards_card_icon left">
              <p>
                { if val.img_url == "" || !val.img_url }
                  <img src="http://www.elongstatic.com/hotels/pic/room_no.png" />
                { else }
                  <img src="{ val.img_url }" />
                { /if }
              </p>   
            </div> 
            <div class="cards_card_icon right">
              <p><span class="layout-16px">{ val.room_name }</span><span class="layout-fright layout-orange layout-20px">
                { if val.current_alloment == "-1" }
                  售罄
                { else }
                  ￥{ val.price }
                { /if }
              </span></p>      
              <p><span class="layout-666">{ val.bed_type }</span></p>
              <p><span class="layout-12px layout-999">{ val.description }</span></p>
            </div>      
            <div class="clear"></div>
          </li>
        { /each }
      </ul>
    { else }
      <ul class="cards"> 
        <li class="cards_card">
          <div class="cards_card_entire">
            <p><span>由于该酒店的担保条件，您需要跳转至艺龙查看该房间信息</span></p>
          </div>
          <div class="cards_card_entire">
            <p><button type="button" onClick="window.location.href='{ answer.elong_url }'">跳转至艺龙</button></p>
          </div>
        </li>  
      </ul>    
    { /if }
  </script>

  <script>
    var response = ${content};
    
    var CMWW = new chumenwenwen();
    $(".necker").html(template.render("necker", response));
    $(".wrapper").html(template.render("wrapper", response));
 
    // Events
    $(".gotoLink").click(function() {
      window.open($(this).attr("data-link"));
    })      
    $(".gotoDial").click(function() {
      CMWW.jump.dial($(this).attr("data-tel"));
    })    
    $(".gotoMark").click(function() {
      CMWW.jump.mark([[response.answer.hotel_info.hotel_name, response.answer.hotel_info.baidu_lat, response.answer.hotel_info.baidu_lng]]);
    })
    $("#intro").click(function() {
      var intros = [];
      intros.push("<b>交通</b><br/>" + response.answer.hotel_info.traffic.split("\n")[0].replace(/　/g, ""));
      intros.push("<b>设施</b><br/>" + response.answer.hotel_info.general_amenities.split("\n")[0].replace(/　/g, ""));
      intros.push("<b>餐饮</b><br/>" + response.answer.hotel_info.dining_amenities.split("\n")[0].replace(/　/g, ""));
      intros.push("<b>娱乐</b><br/>" + response.answer.hotel_info.recreation_amenities.split("\n")[0].replace(/　/g, ""));     
      intros.push("<b>会议</b><br/>" + response.answer.hotel_info.conference_amenities.split("\n")[0].replace(/　/g, ""));   
      intros.push("<b>简介</b><br/>" + response.answer.hotel_info.introduction.split("\n")[0].replace(/　/g, ""));
      var introsFiltered = [];
      for(var i in intros) {
        if(intros[i].length > 20) {
          introsFiltered.push(intros[i]);
        }
      }
      CMWW.showDialog("酒店详细介绍及交通指南", ["content", introsFiltered, ["", "", "", "", "", ""]]);
    })
  </script>
</body>
</html>